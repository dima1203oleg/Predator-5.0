#!/bin/bash
set -e

echo "🔍 Запуск повної перевірки проекту Predator 5.0..."

# Оновлення репозиторію
echo "────────────────────────────────────────────"
echo "Оновлення репозиторію..."
echo "────────────────────────────────────────────"
bash scripts/update_git.sh

# Перевірка залежностей
echo "────────────────────────────────────────────"
echo "Перевірка залежностей..."
echo "────────────────────────────────────────────"
python scripts/check_dependencies.py

# Запуск локальних тестів
echo "────────────────────────────────────────────"
echo "Локальні тести..."
echo "────────────────────────────────────────────"
pytest --maxfail=3 --disable-warnings --tb=short --cov=.

# Перевірка налаштувань GitHub Actions
echo "────────────────────────────────────────────"
echo "Перевірка GitHub Actions..."
echo "────────────────────────────────────────────"
bash scripts/verify_actions.sh

# Перевірка підключень та інструментів
echo "────────────────────────────────────────────"
echo "Перевірка підключень..."
echo "────────────────────────────────────────────"
python scripts/verify_all_connections.py

# Перевірка налаштувань безпеки та сканування
echo "────────────────────────────────────────────"
echo "Перевірка налаштувань безпеки..."
echo "────────────────────────────────────────────"
bash scripts/run_security_tests.sh

echo "────────────────────────────────────────────"
echo "✅ Повна перевірка завершена успішно!"

chmod +x scripts/run_full_check.sh
./scripts/run_full_check.sh
